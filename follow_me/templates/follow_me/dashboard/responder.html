<style>
    .form_create {
        /* display: none; */
    }
    .dummy_link {
        color: rgb(103, 61, 255);
        text-decoration: underline;
    }
    .dummy_link:hover {
        cursor: pointer;
    }
</style>
<div>
    <div class="intro">
        <p class="p-1">
            There is no autoresponder set.
            <span class="dummy_link">Create one now</span>
        </p>
    </div>
    <div class="p-1 form_create">
        <form>
            {% csrf_token %}
            <div class="mb-3">
                <label for="text" class="form-label">Auto Responder Text</label>
                <textarea class="form-control" id="text" rows="5" cols="80" ></textarea>
                <button type="button" id="btn1" class="btn mt-2 btn-primary">Submit</button>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    // function getCookie(name) {
    //     let cookieValue = null;
    //     if (document.cookie && document.cookie !== '') {
    //         const cookies = document.cookie.split(';');
    //         for (let i = 0; i < cookies.length; i++) {
    //             const cookie = cookies[i].trim();
    //             // Does this cookie string begin with the name we want?
    //             if (cookie.substring(0, name.length + 1) === (name + '=')) {
    //                 cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
    //                 break;
    //             }
    //         }
    //     }
    //     return cookieValue;
    // }
    // const csrftoken = getCookie('csrftoken');
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    let form_create = document.querySelector(".form_create");
    let dummy_link= document.querySelector(".dummy_link");
    let intro = document.querySelector(".intro");
    dummy_link.addEventListener("click", () => { 
        form_create.style.display = "block";
        intro.style.display = "none";
    });
    let btn1 = document.querySelector("#btn1");
    let textInput = document.querySelector("#text");
    btn1.addEventListener("click", () => {
        body_send = JSON.stringify({"msg": textInput.value})
        console.log(body_send)
        let url = "dashboard/msg"
        fetch(url, {
            method: "post",
            headers: {
                "X-CSRFToken": csrftoken,
            },
            body: body_send
        })
        .then((res)=> res.json())
        .then((res) => console.log(res))
        .catch((res) => console.log(res))
    })
</script>
